CCOPTS=-A -mt -I..\include -Di8088 -DTURBO -G -O
CC=tcc

OBJASM=crtso.obj head.obj getutil.obj sendrec.obj setjmp.obj catchsig.obj

OBJ1=	ABORT.OBJ ABS.OBJ ACCESS.OBJ ALARM.OBJ ATOI.OBJ ATOL.OBJ \
	BCOPY.OBJ BRK.OBJ BRK2.OBJ CALL.OBJ CHDIR.OBJ CHMOD.OBJ \
	CHOWN.OBJ CHROOT.OBJ CLEANUP.OBJ CLOSE.OBJ CREAT.OBJ CRYPT.OBJ \
	CTYPE.OBJ DOPRINTF.OBJ DUP.OBJ  DUP2.OBJ EXEC.OBJ \
	EXIT.OBJ FCLOSE.OBJ FFLUSH.OBJ FGETS.OBJ FOPEN.OBJ \
	FORK.OBJ FPRINTF.OBJ FPUTS.OBJ FREAD.OBJ FREOPEN.OBJ \
	FSEEK.OBJ FSTAT.OBJ FTELL.OBJ FWRITE.OBJ GETC.OBJ \
	GETEGID.OBJ GETENV.OBJ GETEUID.OBJ GETGID.OBJ GETGRENT.OBJ \
	GETPASS.OBJ GETPID.OBJ GETPWENT.OBJ GETS.OBJ GETUID.OBJ \
	INDEX.OBJ IOCTL.OBJ ISATTY.OBJ ITOA.OBJ KILL.OBJ LINK.OBJ \
	LSEEK.OBJ MALLOC.OBJ MESSAGE.OBJ MKNOD.OBJ MKTEMP.OBJ

OBJ2=	MOUNT.OBJ OPEN.OBJ PAUSE.OBJ PERROR.OBJ PIPE.OBJ \
	PRINTDAT.OBJ PRINTK.OBJ PRINTS.OBJ PROLOGUE.H PUTC.OBJ \
	RAND.OBJ READ.OBJ REGEXP.OBJ REGSUB.OBJ RINDEX.OBJ \
	SCANF.OBJ SETBUF.OBJ SETGID.OBJ SETUID.OBJ \
	SIGNAL.OBJ SLEEP.OBJ SPRINTF.OBJ STAT.OBJ STB.OBJ  \
	STDERR.OBJ STIME.OBJ STRCAT.OBJ STRCMP.OBJ STRCPY.OBJ \
	STRLEN.OBJ STRNCAT.OBJ STRNCMP.OBJ STRNCPY.OBJ SYNC.OBJ \
	SYSLIB.OBJ TIME.OBJ TIMES.OBJ UMASK.OBJ UMOUNT.OBJ \
	UNGETC.OBJ UNLINK.OBJ UTIME.OBJ \
	WAIT.OBJ WRITE.OBJ \
	ctime.obj popen.obj system.obj puts.obj qsort.obj

.c.obj:
		$(CC) $(CCOPTS) -c $<

.asm.obj:
		masm /mx $<,,nul,nul

fast:	*.c
		$(CC) $(CCOPTS) -c *.c

all:	dummy1 dummy2 $(OBJASM)
	copy head.obj ..\mlib
	copy crtso.obj ..\mlib
	del ..\mlib\minix.lib
	tlib c:\tcpp\lib\cs.lib *h_ldiv *h_llsh *h_lursh *f_lxmul *N_LXMUL *H_LRSH *N_SCOPY *H_SPUSH,
	lib @..\mlib\libfile

dummy1:	$(OBJ1)

dummy2:	$(OBJ2)

$(OBJASM):	prologue.h

